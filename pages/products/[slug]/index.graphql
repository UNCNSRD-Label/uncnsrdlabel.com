query Product($slug: String!) {
  product(handle: $slug) {
    availableForSale
    descriptionHtml
    handle
    id
    productType
    publishedAt
    title
    vendor
    images(first: 32) {
      nodes {
        ... on Image {
          altText
          height
          url
          width
        }
      }
    }
    media(first: 32) {
      nodes {
        ... on Model3d {
          alt
          mediaContentType
          previewImage {
            ... on Image {
              altText
              height
              url
              width
            }
          }
          sources {
            filesize
            format
            mimeType
            url
          }
        }
      }
    }
    options {
      id
      name
      values
    }
    priceRange {
      maxVariantPrice {
        amount
        currencyCode
      }
      minVariantPrice {
        amount
        currencyCode
      }
    }
    productType
    seo {
      description
      title
    }
    variants(first: 32) {
      pageInfo {
        hasNextPage
        hasPreviousPage
      }
      nodes {
        barcode
        id
        title
        sku
        availableForSale
        currentlyNotInStock
        metafields(
          identifiers: [
            { namespace: "custom", key: "additional_media" }
            { namespace: "custom", key: "color" }
            { namespace: "custom", key: "complementary_products" }
            { namespace: "custom", key: "composition" }
            { namespace: "custom", key: "related_products" }
          ]
        ) {
          namespace
          key
          type
          value
          description
          id
          reference {
            ... on MetafieldReference {
              ... on Page {
                body
                handle
                onlineStoreUrl
                title
              }
            }
          }
          references(first: 32) {
            nodes {
              ... on MetafieldReference {
                ... on MediaImage {
                  mediaContentType
                  image {
                    ... on Image {
                      altText
                      height
                      url
                      width
                    }
                  }
                }
              }
            }
          }
        }
        quantityAvailable
        requiresShipping
        selectedOptions {
          name
          value
        }
        price {
          amount
          currencyCode
        }
        title
      }
    }
    metafields(
      identifiers: [
        {
          namespace: "shopify--discovery--product_recommendation"
          key: "complementary_products"
        }
        {
          namespace: "shopify--discovery--product_recommendation"
          key: "related_products"
        }
        { namespace: "custom", key: "composition" }
        { namespace: "custom", key: "returns" }
        { namespace: "custom", key: "shipping" }
        { namespace: "custom", key: "sizing" }
        { namespace: "descriptors", key: "care_guide" }
      ]
    ) {
      namespace
      key
      type
      value
      description
      id
      reference {
        ... on MetafieldReference {
          ... on Page {
            body
            handle
            onlineStoreUrl
            title
          }
        }
      }
    }
  }
}
